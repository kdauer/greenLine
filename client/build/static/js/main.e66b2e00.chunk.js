(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{21:function(e,t,a){},35:function(e,t,a){e.exports=a(63)},40:function(e,t,a){},63:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(31),l=a.n(s),i=(a(40),a(2)),o=a(3),u=a(5),c=a(4),m=a(6),h=(a(21),a(15)),d=a(10),p=a.n(d),f=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:"",message:""},a.handleChange=function(e){a.setState(Object(h.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),p.a.post("/api/auth/signup",{username:a.state.username,password:a.state.password}).then((function(e){a.props.history.push("/"),a.props.setUser(e.data)})).catch((function(e){a.setState({message:e.response.data.message})}))},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("label",{htmlFor:"username"},"Username: "),r.a.createElement("input",{type:"text",id:"username",name:"username",value:this.state.username,onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"password"},"Password: "),r.a.createElement("input",{type:"password",name:"password",id:"password",value:this.state.password,onChange:this.handleChange}),r.a.createElement("button",{type:"submit"},"Sign up")),this.state.message&&r.a.createElement("p",null,this.state.message))}}]),t}(n.Component),g=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:"",message:""},a.handleChange=function(e){a.setState(Object(h.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),p.a.post("/api/auth/login",{username:a.state.username,password:a.state.password}).then((function(e){a.props.history.push("/"),console.log(e),a.props.setUser(e.data)})).catch((function(e){a.setState({message:e.response.data.message})}))},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("label",{htmlFor:"username"},"Username: "),r.a.createElement("input",{type:"text",id:"username",name:"username",value:this.state.username,onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"password"},"Password: "),r.a.createElement("input",{type:"password",name:"password",id:"password",value:this.state.password,onChange:this.handleChange}),r.a.createElement("button",{type:"submit"},"Sign in")),this.state.message&&r.a.createElement("p",null,this.state.message))}}]),t}(n.Component),v=a(11),b=function(e){return e.user?r.a.createElement("nav",null,r.a.createElement("p",null,r.a.createElement(v.b,{to:"/"},"Home")),r.a.createElement(v.b,{onClick:function(){p.a.delete("/api/auth/logout").then((function(){e.setUser(null)}))},to:"/"},"Logout")):r.a.createElement("nav",{className:"navbar"},r.a.createElement(v.b,{className:"navbar-home",to:"/",onClick:e.resetTripResults},"Home"),r.a.createElement(v.b,{className:"navbar-login",to:"/login"},"Login"),r.a.createElement(v.b,{className:"navbar-login",to:"/signup"},"Signup"))},E=a(13),y=a(34),C=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!0,showLoader:!0},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.state.loading&&e.setState({showLoader:!1})}),4e3)}},{key:"render",value:function(){var e=this,t=[];this.props.results.forEach((function(e){t.includes(e.address.city)||t.push(e.address.city)}));var a=this.props.results.slice(0,10).map((function(t){return r.a.createElement("li",{key:t.id,onClick:function(a){e.props.updateText(a.target.innerText,t.id)}},t.name)}));return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{name:this.props.name,id:this.props.id,onChange:this.props.onChange,value:this.props.value}),!this.state.showLoader&&r.a.createElement("ul",null,t.map((function(t){return r.a.createElement("li",{onClick:function(a){e.props.updateText(a.target.innerText,t.id)},key:t.id},t)})),a))}}]),t}(n.Component),w=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).state={trip:a.props.selectedTrip},a.onlyHour=function(e){return e.slice(11,16)},a.convert=function(e,t){var a=new Date(e),n=new Date(t);return new Date(+n-+a).toLocaleTimeString().slice(0,4)},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return console.log(this.state.trip),r.a.createElement("div",null,this.state.trip.legs.map((function(t,a){return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,e.onlyHour(t.departure)," ",t.origin.name," Platfrom:",t.departurePlatform,"=>",e.onlyHour(t.arrival)," ",t.destination.name," Platfrom:",t.arrivalPlatform,"Duration: ",e.convert(t.departure,t.arrival)," |train:",t.line.name,"|",e.state.trip.legs[a+1]&&"Transfer Time:\n                  ".concat(e.convert(t.arrival,e.state.trip.legs[a+1].departure))))})))}}]),t}(n.Component),j=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).state={detail:a.props.details,showDetail:!1},a.handleClick=function(){a.state.showDetail?a.setState({showDetail:!1}):a.setState({showDetail:!0})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=new Date(this.state.detail.legs[0].departure),a=new Date(this.state.detail.legs[this.state.detail.legs.length-1].arrival),n=new Date(a-t).toLocaleTimeString();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{key:this.state.detail.id,onClick:this.handleClick},r.a.createElement("p",null,"From: ",this.state.detail.origin.name," at:",this.state.detail.legs[0].departure.slice(0,21),", Platform:",this.state.detail.legs[0].departurePlatform),r.a.createElement("p",null,"To: ",this.state.detail.destination.name," at:",this.state.detail.legs[0].arrival.slice(0,21),",Platform:",this.state.detail.legs[0].arrivalPlatform),r.a.createElement("p",null,"Duration: ",n.slice(0,2)+"h"+n.slice(3,5)+"m"),r.a.createElement("p",null,"Changes: ",this.state.detail.legs.length-1),r.a.createElement("p",null,"First Class:",this.state.detail.firstClass?this.state.detail.firstClass:"not available"),r.a.createElement("p",null,"Second Class:",this.state.detail.normalPrice),r.a.createElement("ul",null,this.state.detail.legs.map((function(t){return r.a.createElement("li",{key:e.state.detail.id,style:{border:"1px solid red"}},t.line.product,t.line.name)}))),this.state.showDetail?r.a.createElement(w,{selectedTrip:this.state.detail}):r.a.createElement("div",null)))}}]),t}(n.Component),S=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).state={results:a.props.resultData,firstClass:a.props.firstClass},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.state.results.map((function(t,a){var n,r={};return r.origin=t.origin,r.destination=t.destination,r.normalPrice=t.price.amount,r.firstClass=null===(n=e.state.firstClass[a])||void 0===n?void 0:n.price.amount,r.legs=t.legs,r.id=t.id,r}));return r.a.createElement("div",null,t.map((function(e){return r.a.createElement(j,{details:e,key:e.id})})))}}]),t}(n.Component),O=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).state={date:"",from:"",to:"",toId:"",fromId:"",class:"",travelers:"",resultTo:[],resultFrom:[],id:"",savedJourney:{},resultData:[],firstClass:[]},a.handleChange=function(e){var t=e.target.value;a.setState({date:t})},a.handleSubmit=function(e){e.preventDefault();var t=a.state.fromId;t||(t=a.state.from);var n=a.state.toId;n||(n=a.state.to);var r=p.a.get("/api/price?date="+a.state.date.slice(0,16)+"&fromId="+t+"&toId="+n);console.log(r);var s=p.a.get("/api/firstPrice");Promise.all([r,s]).then((function(e){var t=Object(y.a)(e,2),n=t[0],r=t[1];a.setState({resultData:n.data,firstClass:r.data}),a.props.resultListSetTrue()}))},a.getStations=function(e){p.a.post("/cities",{to:a.state.to,from:a.state.from}).then((function(t){if("to"===e){var n=t.data.resultTo;""===a.state.to&&(n=[]),a.setState({resultTo:n})}else{var r=t.data.resultFrom;""===a.state.from&&(r=[]),a.setState({resultFrom:r})}}))},a.handleInputChange=function(e){var t=e.target.name;a.setState(Object(h.a)({},e.target.name,e.target.value),(function(){a.getStations(t)}))},a.updateText=function(e,t){a.setState({from:e,fromId:t,resultFrom:[]})},a.updateTo=function(e,t){a.setState({to:e,toId:t,resultTo:[]})},a.handleClickSave=function(e){p.a.post("/journeys",{to:a.state.to,toId:a.state.toId,from:a.state.from,fromId:a.state.fromId,date:a.state.date.slice(0,16)}).then((function(e){console.log(e.data),a.setState({savedJourney:e.data})}))},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("label",{htmlFor:"From"},"From"),r.a.createElement(C,{name:"from",id:"from",updateText:this.updateText,results:this.state.resultFrom,value:this.state.from,onChange:this.handleInputChange}),r.a.createElement("label",{htmlFor:"To"},"To"),r.a.createElement(C,{name:"to",id:this.state.toId,updateText:this.updateTo,results:this.state.resultTo,value:this.state.to,onChange:this.handleInputChange}),r.a.createElement("label",{htmlFor:"Date"},"Date "),r.a.createElement("input",{type:"datetime-local",id:"date",name:"date",value:this.state.date,onChange:this.handleChange}),r.a.createElement("select",null,r.a.createElement("option",{value:"E"},"Adults"),r.a.createElement("option",{value:"K"},"Children"),r.a.createElement("option",{value:"B"},"Baby")),r.a.createElement("button",{type:"submit"},"Search")),this.props.isLoggedIn?r.a.createElement("button",{onClick:this.handleClickSave},"Save this Trip to your List"):r.a.createElement(v.b,{to:"/Login"},"Login to save"),";",this.props.resultListRender?r.a.createElement(S,{isLoggedIn:this.props.isLoggedIn,resultData:this.state.resultData,firstClass:this.state.firstClass}):r.a.createElement("div",null))}}]),t}(n.Component),T=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).state={user:a.props.user,resultListRender:!1,newSearchForm:!1},a.setUser=function(e){a.setState({user:e})},a.resetTripResults=function(){a.setState({resultListRender:!1,newSearchForm:!0})},a.resultListSetTrue=function(){a.setState({resultListRender:!0})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement(b,{setUser:this.setUser,user:this.state.user,resetTripResults:this.resetTripResults}),r.a.createElement("div",null,r.a.createElement(E.a,{path:"/signup",render:function(t){return r.a.createElement(f,{history:t.history,setUser:e.setUser})}})),r.a.createElement(E.a,{path:"/login",render:function(t){return r.a.createElement(g,{history:t.history,setUser:e.setUser})}})),r.a.createElement(E.a,{exact:!0,path:"/",render:function(t){return r.a.createElement(O,{isLoggedIn:Boolean(e.state.user),resultListSetTrue:e.resultListSetTrue,resultListRender:e.state.resultListRender})}}))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(v.a,null,r.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[35,1,2]]]);
//# sourceMappingURL=main.e66b2e00.chunk.js.map